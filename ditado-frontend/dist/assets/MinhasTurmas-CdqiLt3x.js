import{_ as te,u as le,r as u,P as se,I as x,d as t,w as a,l as p,a8 as oe,aa as re,a2 as j,M as ne,a as ie,o as m,W as g,g as o,j as c,i as s,a9 as q,h as d,t as n,ab as W,U as C,c as v,m as L,X as f,J as h,a1 as z,a0 as A,Y as G,G as J,a4 as M,p as O,n as de,q as ue,s as me,S as ce}from"./index-BIk10ILk.js";import{t as fe}from"./turmaService-NV2QRfWI.js";import{d as pe}from"./ditadoService-CIRlxs_S.js";const ge={class:"d-flex align-center justify-space-between"},ve={class:"d-flex align-center justify-space-between"},ye={class:"text-body-2 text-grey-darken-1 mb-3"},xe={class:"d-flex align-center gap-2 mb-3"},be={class:"text-caption text-grey-darken-1"},ke={class:"d-flex align-center gap-2"},Ve={class:"text-caption text-grey-darken-1"},_e={class:"text-h6 font-weight-bold mb-2"},we={class:"text-body-2 text-grey-darken-1 mb-2"},Te={class:"text-caption text-grey-darken-2"},Ce={class:"d-flex align-center"},Ee={key:0,class:"text-center py-8"},Se={class:"text-h6 font-weight-bold mb-2"},De={class:"text-body-2 text-grey-darken-1 mb-3"},he={class:"d-flex align-center gap-2 mb-2"},ze={class:"text-caption text-grey-darken-1"},Ae={class:"d-flex align-center gap-2"},Me={__name:"MinhasTurmas",setup(Ue){const X=ie();le();const b=u([]),k=u([]),E=u([]),U=u(!1),S=u(!1),V=u("turmas"),_=u(!1),w=u(!1),N=u(null),D=u(""),P=u(null),y=u({show:!1,mensagem:"",color:"success"}),Y={obrigatorio:r=>r!=null&&r!==""||"Campo obrigatório"};se(async()=>{await H()});async function H(){U.value=!0;try{await Promise.all([K(),Q()])}catch(r){console.error("Erro ao carregar dados:",r),T("Erro ao carregar dados","error")}finally{U.value=!1}}async function K(){try{const r=await fe.listarTodas();b.value=r}catch(r){console.error("Erro ao carregar minhas turmas:",r)}}async function Q(){try{k.value=[]}catch(r){console.error("Erro ao carregar solicitações:",r)}}function R(){w.value=!0}function B(){w.value=!1,D.value=""}async function Z(){var e,l;const{valid:r}=await P.value.validate();if(r){S.value=!0;try{T("Funcionalidade ainda não implementada na API","warning"),B()}catch(i){console.error("Erro ao solicitar entrada:",i),T(((l=(e=i.response)==null?void 0:e.data)==null?void 0:l.message)||"Erro ao solicitar entrada. Verifique o código.","error")}finally{S.value=!1}}}async function $(r){N.value=r;try{E.value=await pe.listarTodos()}catch(e){console.error("Erro ao carregar ditados:",e),T("Erro ao carregar ditados","error")}_.value=!0}function ee(r){$(r)}function F(r){X.push(`/realizar-ditado/${r.id}`)}function ae(r){return new Date(r).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function T(r,e="success"){y.value={show:!0,mensagem:r,color:e}}return(r,e)=>(m(),x("div",null,[t(p,{class:"mb-6",elevation:"1"},{default:a(()=>[t(g,{class:"pa-6"},{default:a(()=>[o("div",ge,[e[8]||(e[8]=o("div",null,[o("h1",{class:"text-h4 font-weight-bold mb-2"},"Minhas Turmas"),o("p",{class:"text-body-1 text-grey-darken-1"}," Visualize suas turmas e realize os ditados disponíveis ")],-1)),t(c,{color:"success",size:"large","prepend-icon":"mdi-plus",class:"text-none",onClick:R},{default:a(()=>[...e[7]||(e[7]=[s(" + ENTRAR EM TURMA ",-1)])]),_:1})])]),_:1})]),_:1}),t(oe,{modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=l=>V.value=l),color:"primary",class:"mb-6"},{default:a(()=>[t(q,{value:"turmas"},{default:a(()=>[t(d,{start:""},{default:a(()=>[...e[9]||(e[9]=[s("mdi-school",-1)])]),_:1}),s(" Turmas Ativas ("+n(b.value.length)+") ",1)]),_:1}),t(q,{value:"pendentes"},{default:a(()=>[t(d,{start:""},{default:a(()=>[...e[10]||(e[10]=[s("mdi-clock",-1)])]),_:1}),s(" Pendentes ("+n(k.value.length)+") ",1)]),_:1})]),_:1},8,["modelValue"]),t(re,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=l=>V.value=l)},{default:a(()=>[t(W,{value:"turmas"},{default:a(()=>[t(C,null,{default:a(()=>[b.value.length===0?(m(),v(f,{key:0,cols:"12",class:"text-center py-12"},{default:a(()=>[t(d,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:a(()=>[...e[11]||(e[11]=[s(" mdi-school-outline ",-1)])]),_:1}),e[13]||(e[13]=o("p",{class:"text-h6 text-grey-darken-1 mb-2"},"Você não está em nenhuma turma",-1)),e[14]||(e[14]=o("p",{class:"text-body-2 text-grey-darken-2 mb-4"}," Clique no botão acima para entrar em uma turma usando o código ",-1)),t(c,{color:"primary","prepend-icon":"mdi-plus",class:"text-none",onClick:R},{default:a(()=>[...e[12]||(e[12]=[s(" Entrar em Turma ",-1)])]),_:1})]),_:1})):L("",!0),(m(!0),x(h,null,z(b.value,l=>(m(),v(f,{key:l.id,cols:"12",md:"6",lg:"4"},{default:a(()=>[t(p,{class:"h-100 d-flex flex-column",elevation:"1",onClick:i=>ee(l),style:{cursor:"pointer"}},{default:a(()=>[t(A,{class:"bg-primary text-white pb-2"},{default:a(()=>[o("div",ve,[o("span",null,n(l.nome),1),t(G,{color:"white","text-color":"primary",size:"small"},{default:a(()=>{var i;return[s(n(((i=l.ditados)==null?void 0:i.length)||0)+" ditados ",1)]}),_:2},1024)])]),_:2},1024),t(g,{class:"flex-grow-1 pa-4"},{default:a(()=>[o("p",ye,n(l.descricao||"Sem descrição"),1),t(J,{class:"my-3"}),o("div",xe,[t(d,{size:"small",color:"grey-darken-1"},{default:a(()=>[...e[15]||(e[15]=[s("mdi-key",-1)])]),_:1}),o("span",be,n(l.codigo),1)]),o("div",ke,[t(d,{size:"small",color:"grey-darken-1"},{default:a(()=>[...e[16]||(e[16]=[s("mdi-account-multiple",-1)])]),_:1}),o("span",Ve,n(l.totalAlunos||0)+" alunos ",1)])]),_:2},1024),t(M,{class:"pa-4 bg-grey-lighten-5"},{default:a(()=>[t(c,{color:"primary",variant:"flat",width:"100%",class:"text-none",onClick:O(i=>$(l),["stop"])},{default:a(()=>[...e[17]||(e[17]=[s(" Ver Ditados ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),t(W,{value:"pendentes"},{default:a(()=>[t(C,null,{default:a(()=>[k.value.length===0?(m(),v(f,{key:0,cols:"12",class:"text-center py-12"},{default:a(()=>[t(d,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:a(()=>[...e[18]||(e[18]=[s(" mdi-check-circle-outline ",-1)])]),_:1}),e[19]||(e[19]=o("p",{class:"text-h6 text-grey-darken-1"},"Nenhuma solicitação pendente",-1))]),_:1})):L("",!0),(m(!0),x(h,null,z(k.value,l=>(m(),v(f,{key:l.id,cols:"12"},{default:a(()=>[t(p,{elevation:"1",class:"mb-4"},{default:a(()=>[t(g,{class:"pa-6"},{default:a(()=>[t(C,{align:"center"},{default:a(()=>[t(f,{cols:"12",md:"8"},{default:a(()=>{var i,I;return[o("h3",_e,n((i=l.turma)==null?void 0:i.nome),1),o("p",we,n((I=l.turma)==null?void 0:I.descricao),1),o("p",Te," Solicitado em "+n(ae(l.dataSolicitacao)),1)]}),_:2},1024),t(f,{cols:"12",md:"4",class:"text-md-right"},{default:a(()=>[t(G,{color:"warning",variant:"flat"},{default:a(()=>[t(d,{start:""},{default:a(()=>[...e[20]||(e[20]=[s("mdi-clock",-1)])]),_:1}),e[21]||(e[21]=s(" Pendente ",-1))]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(j,{modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=l=>_.value=l),"max-width":"900",persistent:""},{default:a(()=>[t(p,null,{default:a(()=>[t(A,{class:"bg-primary text-white pa-4 d-flex align-center justify-space-between"},{default:a(()=>{var l;return[o("div",Ce,[t(d,{class:"mr-2"},{default:a(()=>[...e[22]||(e[22]=[s("mdi-file-document",-1)])]),_:1}),s(" Ditados - "+n((l=N.value)==null?void 0:l.nome),1)]),t(c,{icon:"mdi-close",variant:"text",color:"white",onClick:e[2]||(e[2]=i=>_.value=!1)})]}),_:1}),t(g,{class:"pa-6"},{default:a(()=>[E.value.length===0?(m(),x("div",Ee,[t(d,{size:"48",color:"grey-lighten-1",class:"mb-2"},{default:a(()=>[...e[23]||(e[23]=[s(" mdi-file-document-outline ",-1)])]),_:1}),e[24]||(e[24]=o("p",{class:"text-grey-darken-1"},"Nenhum ditado disponível nessa turma",-1))])):(m(),v(C,{key:1},{default:a(()=>[(m(!0),x(h,null,z(E.value,l=>(m(),v(f,{key:l.id,cols:"12",md:"6"},{default:a(()=>[t(p,{elevation:"0",class:"border h-100",onClick:i=>F(l)},{default:a(()=>[t(g,{class:"pa-4"},{default:a(()=>[o("h4",Se,n(l.titulo),1),o("p",De,n(l.descricao||"Sem descrição"),1),t(J,{class:"my-3"}),o("div",he,[t(d,{size:"small",color:"info"},{default:a(()=>[...e[25]||(e[25]=[s("mdi-format-text",-1)])]),_:1}),o("span",ze,n(l.palavrasOmitidas)+" palavras ",1)]),o("div",Ae,[t(d,{size:"small",color:"success"},{default:a(()=>[...e[26]||(e[26]=[s("mdi-music",-1)])]),_:1}),e[27]||(e[27]=o("span",{class:"text-caption text-grey-darken-1"}," Com áudio ",-1))])]),_:2},1024),t(M,{class:"pa-4 bg-grey-lighten-5"},{default:a(()=>[t(c,{color:"primary",variant:"flat",width:"100%",class:"text-none",onClick:O(i=>F(l),["stop"])},{default:a(()=>[...e[28]||(e[28]=[s(" Fazer Ditado ",-1)])]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(j,{modelValue:w.value,"onUpdate:modelValue":e[5]||(e[5]=l=>w.value=l),"max-width":"500",persistent:""},{default:a(()=>[t(p,null,{default:a(()=>[t(A,{class:"bg-success text-white pa-4"},{default:a(()=>[t(d,{class:"mr-2"},{default:a(()=>[...e[29]||(e[29]=[s("mdi-school",-1)])]),_:1}),e[30]||(e[30]=s(" Entrar em uma Turma ",-1))]),_:1}),t(g,{class:"pa-6"},{default:a(()=>[e[33]||(e[33]=o("p",{class:"text-body-1 mb-4"}," Digite o código da turma para solicitar entrada ",-1)),t(de,{ref_key:"formEntrarTurma",ref:P},{default:a(()=>[t(ue,{modelValue:D.value,"onUpdate:modelValue":e[4]||(e[4]=l=>D.value=l),label:"Código da Turma",placeholder:"Exemplo: TURMA2024",variant:"outlined",density:"comfortable",counter:"20",maxlength:"20",rules:[Y.obrigatorio],"prepend-inner-icon":"mdi-key",uppercase:""},null,8,["modelValue","rules"])]),_:1},512),t(me,{type:"info",variant:"tonal",density:"compact"},{default:a(()=>[t(d,{class:"mr-2"},{default:a(()=>[...e[31]||(e[31]=[s("mdi-information",-1)])]),_:1}),e[32]||(e[32]=s(" Solicite o código ao seu professor. Sua entrada será confirmada após aprovação. ",-1))]),_:1})]),_:1}),t(M,{class:"pa-4 bg-grey-lighten-5"},{default:a(()=>[t(c,{variant:"text",onClick:B},{default:a(()=>[...e[34]||(e[34]=[s(" Cancelar ",-1)])]),_:1}),t(ce),t(c,{color:"success",variant:"flat",loading:S.value,onClick:Z},{default:a(()=>[...e[35]||(e[35]=[s(" Solicitar ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ne,{modelValue:y.value.show,"onUpdate:modelValue":e[6]||(e[6]=l=>y.value.show=l),color:y.value.color,timeout:3e3},{default:a(()=>[s(n(y.value.mensagem),1)]),_:1},8,["modelValue","color"])]))}},Be=te(Me,[["__scopeId","data-v-d07a9e92"]]);export{Be as default};
