import{_ as oe,u as se,r as c,y as z,S as le,I as p,d as t,c as m,m as re,w as a,l as y,T as I,M as ie,a as ne,o as d,U as x,g as r,t as n,D as de,W as C,h as u,i as l,X as v,Y as D,$ as L,H as j,J as B,a0 as U,A as N,C as R,E as A,j as S,F as M,R as ue,q as ce,a1 as me}from"./index-CIvQQPsm.js";import{d as $}from"./ditadoService-rOwg3Xd8.js";const fe={class:"text-h4 font-weight-bold mb-2"},pe={class:"d-flex align-center justify-space-between mb-2"},ve={class:"d-flex align-center justify-space-between mb-2"},ge={class:"text-caption mt-1"},be={class:"d-flex gap-2"},ye={key:0,class:"text-center py-12"},xe={key:1,class:"text-center py-12"},Ve={key:2},_e={class:"d-flex align-center gap-2"},ke={__name:"PainelProfessor",setup(we){const q=ne(),G=se(),V=c({turmas:0,ditados:0}),E=c([]),_=c([]),h=c(!1),k=c(!1),g=c(""),w=c(null),H=["1º ano","2º ano","3º ano","4º ano","5º ano","6º ano","7º ano","8º ano","9º ano"],b=c({show:!1,mensagem:"",color:"info"}),P=z(()=>{let o=[...E.value];if(g.value&&g.value.trim()!==""){const e=g.value.toLowerCase().trim();o=o.filter(s=>{var i;return(i=s.titulo)==null?void 0:i.toLowerCase().includes(e)})}return w.value&&(o=o.filter(e=>e.serie===w.value)),o}),J=z(()=>_.value.length>0),W=z(()=>_.value.length);le(()=>{X(),Y(),K()});async function X(){k.value=!0;try{const o=await $.listarTodos();V.value.ditados=o.length}catch(o){console.error("Erro ao carregar estatísticas:",o)}finally{k.value=!1}}async function Y(){h.value=!0;try{const o=await $.listarTodos();E.value=[],V.value.ditados=o.length}catch(o){console.error("Erro ao carregar ditados:",o),f("Erro ao carregar ditados","error")}finally{h.value=!1}}async function K(){try{_.value=[]}catch(o){console.error("Erro ao carregar solicitações pendentes:",o)}}async function O(o){try{f("Funcionalidade ainda não implementada","warning")}catch(e){console.error("Erro ao aprovar solicitação:",e),f("Erro ao aprovar solicitação","error")}}async function Q(o){try{f("Funcionalidade ainda não implementada","warning")}catch(e){console.error("Erro ao rejeitar solicitação:",e),f("Erro ao rejeitar solicitação","error")}}function T(o){return new Date(o).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}function Z(o){return!o||!o.nome?"A":o.nome.split(" ").map(e=>e[0]).join("").substring(0,2).toUpperCase()}function ee(o){return o>=80?"success":o>=60?"warning":"error"}function ae(){q.push("/cadastro-ditado")}function te(o){f("Funcionalidade em desenvolvimento","info")}function f(o,e="info"){b.value={show:!0,mensagem:o,color:e}}return(o,e)=>(d(),p("div",null,[t(y,{class:"mb-6",elevation:"1"},{default:a(()=>[t(x,{class:"pa-6"},{default:a(()=>{var s,i;return[r("h1",fe," Bem-vindo(a), "+n((i=(s=de(G).usuario)==null?void 0:s.nome)==null?void 0:i.split(" ")[0]),1),e[3]||(e[3]=r("p",{class:"text-body-1 text-grey-darken-1"}," Gerencie textos, turmas, relatórios e ditados passados ",-1))]}),_:1})]),_:1}),t(I,{class:"mb-6"},{default:a(()=>[t(C,{cols:"12",sm:"6"},{default:a(()=>[t(y,{elevation:"1",class:"h-100"},{default:a(()=>[t(x,{class:"pa-6"},{default:a(()=>[r("div",pe,[t(u,{size:"40",color:"primary"},{default:a(()=>[...e[4]||(e[4]=[l("mdi-account-group",-1)])]),_:1}),k.value?(d(),m(D,{key:1,indeterminate:"",color:"primary",size:"32"})):(d(),m(v,{key:0,color:"primary",variant:"flat",size:"large"},{default:a(()=>[l(n(V.value.turmas),1)]),_:1}))]),e[5]||(e[5]=r("h3",{class:"text-h6 font-weight-bold"},"Turmas",-1)),e[6]||(e[6]=r("p",{class:"text-body-2 text-grey-darken-1 mb-0"},"Turmas cadastradas",-1))]),_:1})]),_:1})]),_:1}),t(C,{cols:"12",sm:"6"},{default:a(()=>[t(y,{elevation:"1",class:"h-100"},{default:a(()=>[t(x,{class:"pa-6"},{default:a(()=>[r("div",ve,[t(u,{size:"40",color:"info"},{default:a(()=>[...e[7]||(e[7]=[l("mdi-headphones",-1)])]),_:1}),k.value?(d(),m(D,{key:1,indeterminate:"",color:"info",size:"32"})):(d(),m(v,{key:0,color:"info",variant:"flat",size:"large"},{default:a(()=>[l(n(V.value.ditados),1)]),_:1}))]),e[8]||(e[8]=r("h3",{class:"text-h6 font-weight-bold"},"Ditados",-1)),e[9]||(e[9]=r("p",{class:"text-body-2 text-grey-darken-1 mb-0"},"Ditados cadastrados",-1))]),_:1})]),_:1})]),_:1})]),_:1}),J.value?(d(),m(y,{key:0,class:"mb-6 elevation-1 border-error"},{default:a(()=>[t(L,{class:"bg-error text-white pa-4 d-flex align-center"},{default:a(()=>[t(u,{class:"mr-2"},{default:a(()=>[...e[10]||(e[10]=[l("mdi-bell-ring",-1)])]),_:1}),e[11]||(e[11]=l(" Solicitações de Ingresso Pendentes ",-1)),t(v,{color:"white","text-color":"error",size:"small",class:"ml-2"},{default:a(()=>[l(n(W.value),1)]),_:1})]),_:1}),t(x,{class:"pa-6"},{default:a(()=>[t(j,{class:"bg-transparent"},{default:a(()=>[(d(!0),p(B,null,U(_.value,s=>(d(),m(N,{key:s.id,class:"mb-3 rounded border",elevation:"0"},{prepend:a(()=>[t(M,{color:"warning"},{default:a(()=>[l(n(Z(s.usuario)),1)]),_:2},1024)]),append:a(()=>[r("div",be,[t(S,{icon:"mdi-check",size:"small",variant:"flat",color:"success",onClick:i=>O(s)},null,8,["onClick"]),t(S,{icon:"mdi-close",size:"small",variant:"flat",color:"error",onClick:i=>Q(s)},null,8,["onClick"])])]),default:a(()=>[t(R,{class:"text-h6 font-weight-bold mb-1"},{default:a(()=>{var i;return[l(n((i=s.usuario)==null?void 0:i.nome),1)]}),_:2},1024),t(A,{class:"text-body-2 mb-2"},{default:a(()=>{var i;return[r("div",null,n((i=s.usuario)==null?void 0:i.email),1),r("div",ge,[l(" Solicitado em "+n(T(s.dataSolicitacao))+" ",1),t(v,{color:"info",variant:"flat",size:"x-small",class:"ml-2"},{default:a(()=>{var F;return[l(n((F=s.turma)==null?void 0:F.nome),1)]}),_:2},1024)])]}),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):re("",!0),t(y,{elevation:"1"},{default:a(()=>[t(L,{class:"pa-6 d-flex align-center border-b"},{default:a(()=>[t(u,{class:"mr-3",color:"grey-darken-2"},{default:a(()=>[...e[12]||(e[12]=[l("mdi-headphones",-1)])]),_:1}),e[14]||(e[14]=r("span",{class:"text-h6 font-weight-bold"},"Ditados passados",-1)),t(ue),t(v,{color:"warning",variant:"flat"},{default:a(()=>[...e[13]||(e[13]=[l(" Últimos 30 dias ",-1)])]),_:1})]),_:1}),t(x,{class:"pa-6"},{default:a(()=>[t(I,{class:"mb-4"},{default:a(()=>[t(C,{cols:"12",sm:"6"},{default:a(()=>[t(ce,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=s=>g.value=s),label:"Filtrar por turma",placeholder:"Digite o nome da turma",variant:"outlined",density:"comfortable","prepend-inner-icon":"mdi-magnify",clearable:"","hide-details":""},null,8,["modelValue"])]),_:1}),t(C,{cols:"12",sm:"6"},{default:a(()=>[t(me,{modelValue:w.value,"onUpdate:modelValue":e[1]||(e[1]=s=>w.value=s),label:"Série",items:H,variant:"outlined",density:"comfortable",clearable:"","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1}),h.value?(d(),p("div",ye,[t(D,{indeterminate:"",color:"primary",size:"64"}),e[15]||(e[15]=r("p",{class:"text-grey mt-4"},"Carregando ditados...",-1))])):P.value.length===0?(d(),p("div",xe,[t(u,{size:"64",color:"grey-lighten-1"},{default:a(()=>[...e[16]||(e[16]=[l("mdi-folder-open-outline",-1)])]),_:1}),e[18]||(e[18]=r("p",{class:"text-body-1 text-grey mt-4"},"Nenhum ditado encontrado",-1)),t(S,{color:"primary",variant:"flat","prepend-icon":"mdi-plus",class:"mt-4 text-none",onClick:ae},{default:a(()=>[...e[17]||(e[17]=[l(" Configure um novo ditado a partir de um texto existente na sua biblioteca ",-1)])]),_:1})])):(d(),p("div",Ve,[t(j,{class:"bg-transparent"},{default:a(()=>[(d(!0),p(B,null,U(P.value,s=>(d(),m(N,{key:s.id,class:"mb-3 rounded border",elevation:"0"},{prepend:a(()=>[t(M,{color:"primary",size:"48"},{default:a(()=>[t(u,{color:"white"},{default:a(()=>[...e[19]||(e[19]=[l("mdi-headphones",-1)])]),_:1})]),_:1})]),append:a(()=>[r("div",_e,[t(v,{color:ee(s.media||78),variant:"flat",size:"large"},{default:a(()=>[t(u,{start:"",size:"18"},{default:a(()=>[...e[22]||(e[22]=[l("mdi-check-circle",-1)])]),_:1}),l(" Média "+n(s.media||"78")+"% ",1)]),_:2},1032,["color"]),t(S,{icon:"mdi-open-in-new",size:"small",variant:"text",color:"primary",onClick:i=>te(s)},null,8,["onClick"])])]),default:a(()=>[t(R,{class:"text-h6 font-weight-bold mb-1"},{default:a(()=>[l(n(s.titulo),1)]),_:2},1024),t(A,{class:"text-body-2 mb-2"},{default:a(()=>[t(u,{size:"16",class:"mr-1"},{default:a(()=>[...e[20]||(e[20]=[l("mdi-calendar",-1)])]),_:1}),l(" Realizado em "+n(T(s.dataCriacao))+" ",1),t(u,{size:"16",class:"ml-3 mr-1"},{default:a(()=>[...e[21]||(e[21]=[l("mdi-account-multiple",-1)])]),_:1}),l(" "+n(s.alunos||"24")+" alunos ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]))]),_:1})]),_:1}),t(ie,{modelValue:b.value.show,"onUpdate:modelValue":e[2]||(e[2]=s=>b.value.show=s),color:b.value.color,timeout:3e3},{default:a(()=>[l(n(b.value.mensagem),1)]),_:1},8,["modelValue","color"])]))}},he=oe(ke,[["__scopeId","data-v-32adaa64"]]);export{he as default};
