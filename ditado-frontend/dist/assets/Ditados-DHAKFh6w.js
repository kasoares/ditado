import{_ as P,r as i,y as R,P as $,I as O,d as o,w as t,l as b,M as j,a2 as F,a as Z,o as D,W as w,g as r,j as d,i as s,U as S,X as T,q as G,T as W,c as X,a0 as E,h as y,a3 as Y,t as n,Y as H,a4 as J,S as K}from"./index-BIk10ILk.js";import{d as Q}from"./ditadoService-CIRlxs_S.js";const h={class:"d-flex align-center justify-space-between"},aa={class:"font-weight-bold"},ea={class:"text-truncate",style:{"max-width":"300px","white-space":"normal"}},ta={class:"d-flex gap-2"},oa={key:1,class:"pa-6 text-center"},la={class:"text-body-1 mb-2"},sa={__name:"Ditados",setup(ra){const z=Z(),m=i([]),x=i([]),f=i(!1),v=i(""),C=i("recentes"),p=i(null),u=i(!1),V=i(!1),c=i({show:!1,mensagem:"",color:"success"}),A=[{title:"Título",key:"titulo",sortable:!0},{title:"Descrição",key:"descricao"},{title:"Palavras Omitidas",key:"palavrasOmitidas",align:"center"},{title:"Data de Criação",key:"dataCriacao",sortable:!0},{title:"Ações",key:"acoes",sortable:!1,align:"center"}],B=[{title:"Mais Recentes",value:"recentes"},{title:"Mais Antigos",value:"antigos"},{title:"A-Z",value:"alfabetico"},{title:"Z-A",value:"alfabetico-inv"}];R(()=>f.value),$(async()=>{await M()});async function M(){f.value=!0;try{const l=await Q.listarTodos();m.value=l,g()}catch(l){console.error("Erro ao carregar ditados:",l),k("Erro ao carregar ditados","error")}finally{f.value=!1}}function g(){let l=[...m.value];if(v.value.trim()){const a=v.value.toLowerCase();l=l.filter(e=>e.titulo.toLowerCase().includes(a)||e.descricao&&e.descricao.toLowerCase().includes(a))}switch(C.value){case"recentes":l.sort((a,e)=>new Date(e.dataCriacao)-new Date(a.dataCriacao));break;case"antigos":l.sort((a,e)=>new Date(a.dataCriacao)-new Date(e.dataCriacao));break;case"alfabetico":l.sort((a,e)=>a.titulo.localeCompare(e.titulo));break;case"alfabetico-inv":l.sort((a,e)=>e.titulo.localeCompare(a.titulo));break}x.value=l}function N(l){z.push(`/editar-ditado/${l.id}`)}function _(l){p.value=l,u.value=!0}async function U(){V.value=!0;try{m.value=m.value.filter(l=>l.id!==p.value.id),g(),k("Ditado excluído com sucesso!","success"),u.value=!1}catch(l){console.error("Erro ao deletar ditado:",l),k("Erro ao excluir ditado","error")}finally{V.value=!1,p.value=null}}function q(l){return new Date(l).toLocaleDateString("pt-BR",{year:"numeric",month:"2-digit",day:"2-digit"})}function I(l){if(!l.textoComMarcacoes)return l.palavrasOmitidas||0;const a=l.textoComMarcacoes.match(/\[([^\]]+)\]/g);return a?a.length:l.palavrasOmitidas||0}function k(l,a="success"){c.value={show:!0,mensagem:l,color:a}}return(l,a)=>(D(),O("div",null,[o(b,{class:"mb-6",elevation:"1"},{default:t(()=>[o(w,{class:"pa-6"},{default:t(()=>[r("div",h,[a[6]||(a[6]=r("div",null,[r("h1",{class:"text-h4 font-weight-bold mb-2"},"Ditados"),r("p",{class:"text-body-1 text-grey-darken-1"}," Gerencie os ditados da instituição ")],-1)),o(d,{color:"success",size:"large","prepend-icon":"mdi-plus",to:"/cadastro-ditado",class:"text-none"},{default:t(()=>[...a[5]||(a[5]=[s(" + DITADO ",-1)])]),_:1})])]),_:1})]),_:1}),o(b,{class:"mb-6",elevation:"1"},{default:t(()=>[o(w,{class:"pa-6"},{default:t(()=>[o(S,null,{default:t(()=>[o(T,{cols:"12",md:"8"},{default:t(()=>[o(G,{modelValue:v.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>v.value=e),g],"prepend-inner-icon":"mdi-magnify",placeholder:"Pesquisar ditados...",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1}),o(T,{cols:"12",md:"4"},{default:t(()=>[o(W,{modelValue:C.value,"onUpdate:modelValue":[a[1]||(a[1]=e=>C.value=e),g],items:B,label:"Ordenar por",variant:"outlined",density:"comfortable"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(b,{elevation:"1"},{default:t(()=>[o(E,{class:"bg-grey-lighten-5 pa-4"},{default:t(()=>[o(y,{class:"mr-2"},{default:t(()=>[...a[7]||(a[7]=[s("mdi-file-document",-1)])]),_:1}),a[8]||(a[8]=s(" Ditados Cadastrados ",-1))]),_:1}),x.value.length>0?(D(),X(Y,{key:0,headers:A,items:x.value,loading:f.value,class:"elevation-0",density:"comfortable"},{"item.titulo":t(({item:e})=>[r("div",aa,n(e.titulo),1)]),"item.descricao":t(({item:e})=>[r("div",ea,n(e.descricao||"-"),1)]),"item.palavrasOmitidas":t(({item:e})=>[o(H,{color:"primary",variant:"flat"},{default:t(()=>[s(n(I(e)),1)]),_:2},1024)]),"item.dataCriacao":t(({item:e})=>[s(n(q(e.dataCriacao)),1)]),"item.acoes":t(({item:e})=>[r("div",ta,[o(d,{icon:"mdi-pencil",size:"small",variant:"text",color:"primary",onClick:L=>N(e)},null,8,["onClick"]),o(d,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:L=>_(e)},null,8,["onClick"])])]),"no-data":t(()=>[o(S,{class:"pa-6"},{default:t(()=>[o(T,{cols:"12",class:"text-center"},{default:t(()=>[o(y,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:t(()=>[...a[9]||(a[9]=[s(" mdi-file-document-outline ",-1)])]),_:1}),a[11]||(a[11]=r("p",{class:"text-h6 text-grey-darken-1 mb-2"},"Nenhum ditado cadastrado",-1)),a[12]||(a[12]=r("p",{class:"text-body-2 text-grey-darken-2 mb-4"}," Crie seu primeiro ditado clicando no botão acima ",-1)),o(d,{color:"primary",to:"/cadastro-ditado","prepend-icon":"mdi-plus",class:"text-none"},{default:t(()=>[...a[10]||(a[10]=[s(" Criar Ditado ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["items","loading"])):(D(),O("div",oa,[o(y,{size:"64",color:"grey-lighten-1",class:"mb-4"},{default:t(()=>[...a[13]||(a[13]=[s(" mdi-file-document-outline ",-1)])]),_:1}),a[14]||(a[14]=r("p",{class:"text-h6 text-grey-darken-1 mb-2"},"Nenhum ditado encontrado",-1)),a[15]||(a[15]=r("p",{class:"text-body-2 text-grey-darken-2"}," Nenhum resultado corresponde aos critérios de busca ",-1))]))]),_:1}),o(j,{modelValue:c.value.show,"onUpdate:modelValue":a[2]||(a[2]=e=>c.value.show=e),color:c.value.color,timeout:3e3},{default:t(()=>[s(n(c.value.mensagem),1)]),_:1},8,["modelValue","color"]),o(F,{modelValue:u.value,"onUpdate:modelValue":a[4]||(a[4]=e=>u.value=e),"max-width":"400"},{default:t(()=>[o(b,null,{default:t(()=>[o(E,{class:"bg-red-lighten-5 pa-4"},{default:t(()=>[o(y,{color:"error",class:"mr-2"},{default:t(()=>[...a[16]||(a[16]=[s("mdi-alert",-1)])]),_:1}),a[17]||(a[17]=s(" Confirmar Exclusão ",-1))]),_:1}),o(w,{class:"pa-6"},{default:t(()=>{var e;return[r("p",la,[a[18]||(a[18]=s(" Tem certeza que deseja excluir o ditado ",-1)),r("strong",null,n((e=p.value)==null?void 0:e.titulo),1),a[19]||(a[19]=s("? ",-1))]),a[20]||(a[20]=r("p",{class:"text-body-2 text-grey-darken-1"}," Esta ação não pode ser desfeita. ",-1))]}),_:1}),o(J,{class:"pa-4 bg-grey-lighten-5"},{default:t(()=>[o(d,{variant:"text",onClick:a[3]||(a[3]=e=>u.value=!1)},{default:t(()=>[...a[21]||(a[21]=[s(" Cancelar ",-1)])]),_:1}),o(K),o(d,{color:"error",variant:"flat",loading:V.value,onClick:U},{default:t(()=>[...a[22]||(a[22]=[s(" Excluir ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},na=P(sa,[["__scopeId","data-v-20514b18"]]);export{na as default};
