import{_ as U,a as P,u as L,x as I,r as _,y as C,z as S,c as V,o as g,w as o,d as e,A as l,B as $,C as E,i as w,t as x,D as v,E as N,F as j,g as D,G as B,H as z,m as T,I as F,J as G,K as R,L as H,M as O,j as M,N as J,O as K,P as Q,v as q,Q as W,R as X,S as Y,T as Z,e as ee,V as ae,b as te,k as oe,f as re}from"./index-D-Fq01nM.js";const se={class:"text-h6 font-weight-bold"},ie={class:"pa-2 text-center"},le={__name:"MenuLateral",props:{drawer:Boolean},emits:["update:drawer"],setup(k,{emit:h}){const n=k,y=h,i=P(),t=L(),{mobile:u}=I(),d=_(n.drawer),m=_(!1),b=_(!1),A=C(()=>t.ehAdministrador?"/admin":t.ehProfessor?"/professor":t.ehAluno?"/aluno":"/");S(()=>n.drawer,f=>{d.value=f}),S(d,f=>{y("update:drawer",f)}),S(u,f=>{f&&(m.value=!1)});const c=C(()=>{var s;return(((s=t.usuario)==null?void 0:s.nome)||"AT").split(" ").map(r=>r[0]).join("").substring(0,2).toUpperCase()});function a(){b.value=!0}function p(){t.logout(),i.push("/login")}return(f,s)=>(g(),V(J,{modelValue:d.value,"onUpdate:modelValue":s[2]||(s[2]=r=>d.value=r),rail:m.value,temporary:v(u),permanent:"",class:"menu-lateral",color:"#3d4f5c",width:"260"},{append:o(()=>[D("div",ie,[e(M,{icon:m.value?"mdi-chevron-right":"mdi-chevron-left",variant:"text",color:"white",size:"small",onClick:s[1]||(s[1]=r=>m.value=!m.value)},null,8,["icon"])])]),default:o(()=>[e(l,{class:$(["perfil-usuario px-4 py-4",{"rail-perfil":m.value}])},{prepend:o(()=>[e(j,{color:"primary",size:"48"},{default:o(()=>[D("span",se,x(c.value),1)]),_:1})]),default:o(()=>[e(E,{class:"text-white font-weight-bold text-body-1"},{default:o(()=>{var r;return[w(x(((r=v(t).usuario)==null?void 0:r.nome)||"Administrador Temporário"),1)]}),_:1}),e(N,{class:"text-grey-lighten-1 text-body-2"},{default:o(()=>{var r;return[w(x(((r=v(t).usuario)==null?void 0:r.email)||"admin@sga.com"),1)]}),_:1})]),_:1},8,["class"]),e(B,{class:"border-opacity-25 my-2"}),e(z,{density:"comfortable",nav:"",class:"px-3"},{default:o(()=>[e(l,{"prepend-icon":"mdi-home",title:"Início",value:"home",to:A.value,class:"menu-item mb-2 rounded-lg"},null,8,["to"]),v(t).ehAdministrador?(g(),V(l,{key:0,"prepend-icon":"mdi-account-multiple",title:"Usuários",value:"usuarios",to:"/usuarios",class:"menu-item mb-2 rounded-lg"})):T("",!0),v(t).ehProfessor||v(t).ehAdministrador?(g(),F(G,{key:1},[e(l,{"prepend-icon":"mdi-file-document",title:"Ditados",value:"ditados",to:"/ditados",class:"menu-item mb-2 rounded-lg"}),e(l,{"prepend-icon":"mdi-school",title:"Turmas",value:"turmas",to:"/turmas",class:"menu-item mb-2 rounded-lg"}),e(l,{"prepend-icon":"mdi-chart-line",title:"Relatórios",value:"relatorios",class:"menu-item mb-2 rounded-lg",onClick:a})],64)):T("",!0),v(t).ehAluno?(g(),V(l,{key:2,"prepend-icon":"mdi-school",title:"Minhas Turmas",value:"minhas-turmas",to:"/minhas-turmas",class:"menu-item mb-2 rounded-lg"})):T("",!0),e(B,{class:"border-opacity-25 my-3"}),e(R,{value:"perfil"},{activator:o(({props:r})=>[e(l,H(r,{"prepend-icon":"mdi-account",title:"Perfil",class:"menu-item mb-2 rounded-lg"}),null,16)]),default:o(()=>[e(l,{title:"Editar Perfil",value:"editar-perfil",to:"/perfil",class:"submenu-item pl-12 rounded-lg"})]),_:1}),e(l,{"prepend-icon":"mdi-logout",title:"Sair",value:"sair",onClick:p,class:"menu-item mb-2 rounded-lg"})]),_:1}),e(O,{modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=r=>b.value=r),color:"info",timeout:2e3},{default:o(()=>[...s[3]||(s[3]=[w(" Funcionalidade em desenvolvimento ",-1)])]),_:1},8,["modelValue"])]),_:1},8,["modelValue","rail","temporary"]))}},ne=U(le,[["__scopeId","data-v-db3b8f65"]]),ue={class:"d-flex align-center gap-3 mr-4"},de={__name:"BarraSuperior",emits:["toggle-drawer"],setup(k,{emit:h}){const n=h,y=K(),i=P(),t=L(),u=_([]),d=_(null),m=C(()=>({Home:"Home",Perfil:"Editar Perfil",Usuarios:"Gerenciar Usuários",Ditados:"Ditados",Turmas:"Turmas",MinhasTurmas:"Minhas Turmas",CadastroDitado:"Cadastro de Ditado"})[y.name]||"Sistema de Gestão");Q(async()=>{await b()});async function b(){var c;try{const a=await q.listarTodos();u.value=a,(c=t.usuario)!=null&&c.id&&(d.value=t.usuario.id)}catch(a){console.error("Erro ao carregar usuários:",a)}}async function A(c){try{const a=u.value.find(p=>p.id===c);if(a){const p=`token_${a.id}_${Date.now()}`;t.definirUsuario(a,p),a.tipo==="Administrador"?i.push("/admin"):a.tipo==="Professor"?i.push("/professor"):a.tipo==="Aluno"&&i.push("/aluno")}}catch(a){console.error("Erro ao mudar usuário:",a)}}return(c,a)=>(g(),V(ee,{elevation:"0",color:"white",height:"70",border:"b"},{default:o(()=>[e(W,{onClick:a[0]||(a[0]=p=>n("toggle-drawer")),class:"ml-2"}),e(X,{class:"text-h6 font-weight-bold text-grey-darken-3"},{default:o(()=>[w(x(m.value),1)]),_:1}),e(Y),D("div",ue,[e(Z,{modelValue:d.value,"onUpdate:modelValue":[a[1]||(a[1]=p=>d.value=p),A],items:u.value,"item-title":"nome","item-value":"id",label:"Usuário Teste",variant:"outlined",density:"compact",style:{"max-width":"200px"}},null,8,["modelValue","items"]),e(M,{variant:"outlined",color:"primary","prepend-icon":"mdi-help-circle-outline",class:"text-none"},{default:o(()=>[...a[2]||(a[2]=[w(" Ajuda ",-1)])]),_:1})])]),_:1}))}},me=U(de,[["__scopeId","data-v-19182ee7"]]),pe={__name:"LayoutPrincipal",setup(k){const{mobile:h}=I(),n=_(!h.value);return(y,i)=>{const t=te("router-view");return g(),V(ae,null,{default:o(()=>[e(ne,{drawer:n.value,"onUpdate:drawer":i[0]||(i[0]=u=>n.value=u)},null,8,["drawer"]),e(me,{onToggleDrawer:i[1]||(i[1]=u=>n.value=!n.value)}),e(oe,{class:"bg-grey-lighten-4"},{default:o(()=>[e(re,{fluid:"",class:"pa-4 pa-md-8"},{default:o(()=>[e(t)]),_:1})]),_:1})]),_:1})}}};export{pe as default};
